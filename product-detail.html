<!DOCTYPE html>
<html>
  <head>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
    <link
      rel="stylesheet"
      as="style"
      onload="this.rel='stylesheet'"
      href="https://fonts.googleapis.com/css2?display=swap&amp;family=Noto+Sans%3Awght%40400%3B500%3B700%3B900&amp;family=Plus+Jakarta+Sans%3Awght%40400%3B500%3B700%3B800"
    />

    <title>Product Details - FreshCart</title>
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64," />

    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script>
      let cart = [];
      let currentProduct = null;
      let reviews = {};
      
      // Initialize reviews data
      function initializeReviews() {
        const savedReviews = localStorage.getItem('productReviews');
        if (savedReviews) {
          reviews = JSON.parse(savedReviews);
        }
      }
      
      // Get average rating for a product
      function getAverageRating(productName) {
        if (!reviews[productName] || reviews[productName].length === 0) {
          return 0;
        }
        const total = reviews[productName].reduce((sum, review) => sum + review.rating, 0);
        return (total / reviews[productName].length).toFixed(1);
      }
      
      // Get review count for a product
      function getReviewCount(productName) {
        return reviews[productName] ? reviews[productName].length : 0;
      }
      
      // Add a new review
      function addReview(productName, rating, comment) {
        if (!reviews[productName]) {
          reviews[productName] = [];
        }
        
        const newReview = {
          user: 'You',
          rating: rating,
          comment: comment,
          date: new Date().toISOString().split('T')[0]
        };
        
        reviews[productName].unshift(newReview);
        localStorage.setItem('productReviews', JSON.stringify(reviews));
        
        updateReviewDisplay();
        showNotification('Review added successfully!');
      }
      
      // Load cart from localStorage
      function loadCart() {
        const savedCart = localStorage.getItem('cart');
        if (savedCart) {
          cart = JSON.parse(savedCart);
          updateCartDisplay();
        }
      }
      
      // Save cart to localStorage
      function saveCart() {
        localStorage.setItem('cart', JSON.stringify(cart));
      }
      
      // Update cart display
      function updateCartDisplay() {
        const cartCount = document.getElementById('cart-count');
        if (cartCount) {
          cartCount.textContent = cart.length;
          cartCount.style.display = cart.length > 0 ? 'block' : 'none';
        }
      }
      
      // Add to cart function
      function addToCart() {
        if (!currentProduct) return;
        
        const quantity = parseInt(document.getElementById('quantity').value);
        const existingItem = cart.find(item => item.name === currentProduct.name);
        
        if (existingItem) {
          existingItem.quantity += quantity;
        } else {
          cart.push({
            name: currentProduct.name,
            price: currentProduct.price,
            image: currentProduct.image,
            quantity: quantity
          });
        }
        
        saveCart();
        updateCartDisplay();
        showNotification(`${currentProduct.name} added to cart!`);
      }
      
      // Show notification
      function showNotification(message) {
        const notification = document.createElement('div');
        notification.className = 'fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50';
        notification.textContent = message;
        document.body.appendChild(notification);
        
        setTimeout(() => {
          notification.remove();
        }, 2000);
      }
      
      // View cart function
      function viewCart() {
        if (cart.length === 0) {
          alert('Your cart is empty! Add some products to get started.');
          return;
        }
        window.location.href = 'Home3.html';
      }
      
      // Load product details from URL parameters or enhanced data
      async function loadProductDetails() {
        const urlParams = new URLSearchParams(window.location.search);
        const isEnhanced = urlParams.get('enhanced') === 'true';
        
        if (isEnhanced) {
          // Load enhanced product data from session storage
          const enhancedProductData = sessionStorage.getItem('enhancedProduct');
          if (enhancedProductData) {
            currentProduct = JSON.parse(enhancedProductData);
            displayEnhancedProduct(currentProduct);
            return;
          }
        }
        
        // Fallback to URL parameters
        const productName = urlParams.get('name');
        const productPrice = urlParams.get('price');
        const productImage = urlParams.get('image');
        const productDescription = urlParams.get('description');
        const productCategory = urlParams.get('category');
        
        if (productName && productPrice && productImage) {
          currentProduct = {
            name: productName,
            price: productPrice,
            image: productImage,
            description: productDescription || '',
            category: productCategory || ''
          };
          
          // Try to enhance with API data
          try {
            const enhancedProduct = await productManager.getProductData(productName);
            if (enhancedProduct && enhancedProduct.nutrition) {
              currentProduct = { ...currentProduct, ...enhancedProduct };
              displayEnhancedProduct(currentProduct);
            } else {
              displayBasicProduct(currentProduct);
            }
          } catch (error) {
            console.error('Error enhancing product:', error);
            displayBasicProduct(currentProduct);
          }
        } else {
          // Redirect to main page if no product data
          window.location.href = 'Home.html';
        }
      }

      // Display enhanced product with nutritional data
      function displayEnhancedProduct(product) {
        // Update basic product info
        document.getElementById('product-image').style.backgroundImage = `url("${product.image}")`;
        document.getElementById('product-name').textContent = product.name;
        document.getElementById('product-price').textContent = product.price;
        document.getElementById('product-description').textContent = product.description || 'No description available.';
        document.getElementById('product-category').textContent = product.category || 'General';
        
        // Update page title
        document.title = `${product.name} - FreshCart`;
        
        // Add nutritional information section
        addNutritionalSection(product);
        
        // Add health scores
        addHealthScores(product);
        
        // Add dietary information
        addDietaryInfo(product);
        
        // Add allergen information
        addAllergenInfo(product);
        
        // Add ingredients
        addIngredientsSection(product);
      }

      // Display basic product (fallback)
      function displayBasicProduct(product) {
        document.getElementById('product-image').style.backgroundImage = `url("${product.image}")`;
        document.getElementById('product-name').textContent = product.name;
        document.getElementById('product-price').textContent = product.price;
        document.getElementById('product-description').textContent = product.description || 'No description available.';
        document.getElementById('product-category').textContent = product.category || 'General';
        
        document.title = `${product.name} - FreshCart`;
      }
      
      // Function to update review display
      function updateReviewDisplay() {
        if (!currentProduct) return;
        
        const productReviews = reviews[currentProduct.name] || [];
        const averageRating = getAverageRating(currentProduct.name);
        const reviewCount = getReviewCount(currentProduct.name);
        
        // Update rating display
        const ratingDisplay = document.getElementById('product-rating');
        if (ratingDisplay) {
          ratingDisplay.innerHTML = `
            <div class="flex items-center gap-2 mb-2">
              <div class="flex text-yellow-500">
                ${'★'.repeat(Math.floor(averageRating))}${averageRating % 1 >= 0.5 ? '☆' : ''}${'☆'.repeat(5-Math.floor(averageRating)-(averageRating % 1 >= 0.5 ? 1 : 0))}
              </div>
              <span class="font-semibold">${averageRating} out of 5</span>
              <span class="text-gray-600">(${reviewCount} review${reviewCount !== 1 ? 's' : ''})</span>
            </div>
          `;
        }
        
        // Update reviews list
        const reviewsContainer = document.getElementById('reviews-container');
        if (reviewsContainer) {
          if (productReviews.length > 0) {
            const reviewsHTML = productReviews.map(review => `
              <div class="border-b border-gray-200 pb-4 mb-4">
                <div class="flex items-center justify-between mb-2">
                  <div class="flex items-center gap-2">
                    <div class="flex text-yellow-500">
                      ${'★'.repeat(review.rating)}${'☆'.repeat(5-review.rating)}
                    </div>
                    <span class="font-medium">${review.user}</span>
                  </div>
                  <span class="text-sm text-gray-500">${review.date}</span>
                </div>
                <p class="text-gray-600">${review.comment}</p>
              </div>
            `).join('');
            reviewsContainer.innerHTML = reviewsHTML;
          } else {
            reviewsContainer.innerHTML = '<p class="text-gray-500 text-center py-4">No reviews yet. Be the first to review this product!</p>';
          }
        }
      }
      
      // Function to show add review modal
      function showAddReviewModal() {
        const modalHTML = `
          <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-white rounded-xl p-6 max-w-md w-full mx-4">
              <div class="flex items-center justify-between mb-4">
                <h2 class="text-xl font-bold text-[#1b0e0e]">Write a Review</h2>
                <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 256 256">
                    <path d="M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"></path>
                  </svg>
                </button>
              </div>
              <div class="space-y-4">
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Rating</label>
                  <div class="flex gap-2" id="rating-stars">
                    <button onclick="setRating(1)" class="text-2xl text-gray-300 hover:text-yellow-500" data-rating="1">★</button>
                    <button onclick="setRating(2)" class="text-2xl text-gray-300 hover:text-yellow-500" data-rating="2">★</button>
                    <button onclick="setRating(3)" class="text-2xl text-gray-300 hover:text-yellow-500" data-rating="3">★</button>
                    <button onclick="setRating(4)" class="text-2xl text-gray-300 hover:text-yellow-500" data-rating="4">★</button>
                    <button onclick="setRating(5)" class="text-2xl text-gray-300 hover:text-yellow-500" data-rating="5">★</button>
                  </div>
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Comment</label>
                  <textarea id="review-comment" rows="3" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#994d51] focus:border-transparent" placeholder="Share your experience with this product..."></textarea>
                </div>
                <div class="flex gap-3">
                  <button onclick="closeModal()" class="flex-1 bg-gray-200 text-gray-800 py-2 px-4 rounded-lg font-medium hover:bg-gray-300 transition-colors">
                    Cancel
                  </button>
                  <button onclick="submitReview()" class="flex-1 bg-[#994d51] text-white py-2 px-4 rounded-lg font-medium hover:bg-[#7a3d41] transition-colors">
                    Submit Review
                  </button>
                </div>
              </div>
            </div>
          </div>
        `;
        document.body.insertAdjacentHTML('beforeend', modalHTML);
      }
      
      // Function to set rating stars
      function setRating(rating) {
        const stars = document.querySelectorAll('#rating-stars button');
        stars.forEach((star, index) => {
          if (index < rating) {
            star.classList.remove('text-gray-300');
            star.classList.add('text-yellow-500');
          } else {
            star.classList.remove('text-yellow-500');
            star.classList.add('text-gray-300');
          }
        });
        window.selectedRating = rating;
      }
      
      // Function to submit review
      function submitReview() {
        if (!currentProduct) return;
        
        const rating = window.selectedRating || 0;
        const comment = document.getElementById('review-comment').value.trim();
        
        if (rating === 0) {
          alert('Please select a rating');
          return;
        }
        
        if (comment === '') {
          alert('Please write a comment');
          return;
        }
        
        addReview(currentProduct.name, rating, comment);
        closeModal();
      }
      
      // Function to close modal
      function closeModal() {
        const modal = document.querySelector('.fixed.inset-0.bg-black.bg-opacity-50');
        if (modal) {
          modal.remove();
        }
      }
      
      // Initialize page
      window.onload = function() {
        loadCart();
        initializeReviews();
        loadProductDetails();
        
        // Update review display after loading product details
        setTimeout(() => {
          updateReviewDisplay();
        }, 100);
      };

      // Add nutritional information section
      function addNutritionalSection(product) {
        if (!product.nutrition) return;
        
        const container = document.querySelector('.layout-content-container');
        if (!container) return;
        
        const nutritionSection = document.createElement('div');
        nutritionSection.className = 'px-4 py-3';
        nutritionSection.innerHTML = `
          <div class="bg-white rounded-xl shadow-lg p-6">
            <h3 class="text-xl font-bold text-gray-800 mb-4">Nutritional Information</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <h4 class="font-semibold text-gray-700 mb-3">Per 100g</h4>
                <div class="space-y-2">
                  ${product.nutrition.energy ? `<div class="flex justify-between py-1 border-b border-gray-100"><span>Energy</span><span class="font-medium">${product.nutrition.energy} kcal</span></div>` : ''}
                  ${product.nutrition.protein ? `<div class="flex justify-between py-1 border-b border-gray-100"><span>Protein</span><span class="font-medium">${product.nutrition.protein}g</span></div>` : ''}
                  ${product.nutrition.carbohydrates ? `<div class="flex justify-between py-1 border-b border-gray-100"><span>Carbohydrates</span><span class="font-medium">${product.nutrition.carbohydrates}g</span></div>` : ''}
                  ${product.nutrition.fat ? `<div class="flex justify-between py-1 border-b border-gray-100"><span>Fat</span><span class="font-medium">${product.nutrition.fat}g</span></div>` : ''}
                  ${product.nutrition.fiber ? `<div class="flex justify-between py-1 border-b border-gray-100"><span>Fiber</span><span class="font-medium">${product.nutrition.fiber}g</span></div>` : ''}
                  ${product.nutrition.sugar ? `<div class="flex justify-between py-1 border-b border-gray-100"><span>Sugar</span><span class="font-medium">${product.nutrition.sugar}g</span></div>` : ''}
                  ${product.nutrition.salt ? `<div class="flex justify-between py-1 border-b border-gray-100"><span>Salt</span><span class="font-medium">${product.nutrition.salt}g</span></div>` : ''}
                </div>
              </div>
              <div>
                <h4 class="font-semibold text-gray-700 mb-3">Vitamins & Minerals</h4>
                <div class="space-y-2">
                  ${product.nutrition.vitaminC ? `<div class="flex justify-between py-1 border-b border-gray-100"><span>Vitamin C</span><span class="font-medium">${product.nutrition.vitaminC}mg</span></div>` : ''}
                  ${product.nutrition.calcium ? `<div class="flex justify-between py-1 border-b border-gray-100"><span>Calcium</span><span class="font-medium">${product.nutrition.calcium}mg</span></div>` : ''}
                  ${product.nutrition.iron ? `<div class="flex justify-between py-1 border-b border-gray-100"><span>Iron</span><span class="font-medium">${product.nutrition.iron}mg</span></div>` : ''}
                  ${product.nutrition.potassium ? `<div class="flex justify-between py-1 border-b border-gray-100"><span>Potassium</span><span class="font-medium">${product.nutrition.potassium}mg</span></div>` : ''}
                </div>
              </div>
            </div>
          </div>
        `;
        
        container.appendChild(nutritionSection);
      }

      // Add health scores
      function addHealthScores(product) {
        const container = document.querySelector('.layout-content-container');
        if (!container) return;
        
        const scoresSection = document.createElement('div');
        scoresSection.className = 'px-4 py-3';
        scoresSection.innerHTML = `
          <div class="bg-white rounded-xl shadow-lg p-6">
            <h3 class="text-lg font-semibold text-gray-800 mb-4">Health Scores</h3>
            <div class="flex gap-4">
              ${product.healthScore ? `
                <div class="flex items-center gap-3 bg-gray-50 p-4 rounded-lg">
                  <div class="w-10 h-10 rounded-full flex items-center justify-center text-white font-bold text-lg" style="background-color: ${product.healthScoreColor || '#ccc'}">
                    ${product.healthScore.toUpperCase()}
                  </div>
                  <div>
                    <div class="font-semibold text-sm">Nutri-Score</div>
                    <div class="text-xs text-gray-600">Nutritional quality</div>
                  </div>
                </div>
              ` : ''}
              ${product.ecoScore ? `
                <div class="flex items-center gap-3 bg-gray-50 p-4 rounded-lg">
                  <div class="w-10 h-10 rounded-full flex items-center justify-center text-white font-bold text-lg" style="background-color: ${product.ecoScoreColor || '#ccc'}">
                    ${product.ecoScore.toUpperCase()}
                  </div>
                  <div>
                    <div class="font-semibold text-sm">Eco-Score</div>
                    <div class="text-xs text-gray-600">Environmental impact</div>
                  </div>
                </div>
              ` : ''}
            </div>
          </div>
        `;
        
        container.appendChild(scoresSection);
      }

      // Add dietary information
      function addDietaryInfo(product) {
        if (!product.dietary || product.dietary.length === 0) return;
        
        const container = document.querySelector('.layout-content-container');
        if (!container) return;
        
        const dietarySection = document.createElement('div');
        dietarySection.className = 'px-4 py-3';
        dietarySection.innerHTML = `
          <div class="bg-white rounded-xl shadow-lg p-6">
            <h3 class="text-lg font-semibold text-gray-800 mb-3">Dietary Information</h3>
            <div class="flex flex-wrap gap-2">
              ${product.dietary.map(diet => `
                <span class="px-3 py-1 bg-green-100 text-green-800 text-sm rounded-full font-medium">
                  ${diet}
                </span>
              `).join('')}
            </div>
          </div>
        `;
        
        container.appendChild(dietarySection);
      }

      // Add allergen information
      function addAllergenInfo(product) {
        if (!product.allergens || product.allergens.length === 0) return;
        
        const container = document.querySelector('.layout-content-container');
        if (!container) return;
        
        const allergenSection = document.createElement('div');
        allergenSection.className = 'px-4 py-3';
        allergenSection.innerHTML = `
          <div class="bg-red-50 border border-red-200 rounded-xl p-6">
            <h3 class="text-lg font-semibold text-red-800 mb-3">⚠️ Allergen Information</h3>
            <div class="flex flex-wrap gap-2">
              ${product.allergens.map(allergen => `
                <span class="px-3 py-1 bg-red-100 text-red-800 text-sm rounded-full font-medium">
                  ${allergen}
                </span>
              `).join('')}
            </div>
          </div>
        `;
        
        container.appendChild(allergenSection);
      }

      // Add ingredients section
      function addIngredientsSection(product) {
        if (!product.ingredients) return;
        
        const container = document.querySelector('.layout-content-container');
        if (!container) return;
        
        const ingredientsSection = document.createElement('div');
        ingredientsSection.className = 'px-4 py-3';
        ingredientsSection.innerHTML = `
          <div class="bg-blue-50 border border-blue-200 rounded-xl p-6">
            <h3 class="text-lg font-semibold text-blue-800 mb-3">📋 Ingredients</h3>
            <p class="text-blue-700 text-sm leading-relaxed">${product.ingredients}</p>
          </div>
        `;
        
        container.appendChild(ingredientsSection);
      }
    </script>
  </head>
  <body>
    <div class="relative flex size-full min-h-screen flex-col bg-[#fcf8f8] group/design-root overflow-x-hidden" style='font-family: "Plus Jakarta Sans", "Noto Sans", sans-serif;'>
      <div class="layout-container flex h-full grow flex-col">
        <header class="flex items-center justify-between whitespace-nowrap border-b border-solid border-b-[#f3e7e8] px-10 py-3">
          <div class="flex items-center gap-8">
            <div class="flex items-center gap-4 text-[#1b0e0e]">
              <div class="size-4">
                <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M13.8261 17.4264C16.7203 18.1174 20.2244 18.5217 24 18.5217C27.7756 18.5217 31.2797 18.1174 34.1739 17.4264C36.9144 16.7722 39.9967 15.2331 41.3563 14.1648L24.8486 40.6391C24.4571 41.267 23.5429 41.267 23.1514 40.6391L6.64374 14.1648C8.00331 15.2331 11.0856 16.7722 13.8261 17.4264Z"
                    fill="currentColor"
                  ></path>
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M39.998 12.236C39.9944 12.2537 39.9875 12.2845 39.9748 12.3294C39.9436 12.4399 39.8949 12.5741 39.8346 12.7175C39.8168 12.7597 39.7989 12.8007 39.7813 12.8398C38.5103 13.7113 35.9788 14.9393 33.7095 15.4811C30.9875 16.131 27.6413 16.5217 24 16.5217C20.3587 16.5217 17.0125 16.131 14.2905 15.4811C12.0012 14.9346 9.44505 13.6897 8.18538 12.8168C8.17384 12.7925 8.16216 12.767 8.15052 12.7408C8.09919 12.6249 8.05721 12.5114 8.02977 12.411C8.00356 12.3152 8.00039 12.2667 8.00004 12.2612C8.00004 12.261 8 12.2607 8.00004 12.2612C8.00004 12.2359 8.0104 11.9233 8.68485 11.3686C9.34546 10.8254 10.4222 10.2469 11.9291 9.72276C14.9242 8.68098 19.1919 8 24 8C28.8081 8 33.0758 8.68098 36.0709 9.72276C37.5778 10.2469 38.6545 10.8254 39.3151 11.3686C39.9006 11.8501 39.9857 12.1489 39.998 12.236ZM4.95178 15.2312L21.4543 41.6973C22.6288 43.5809 25.3712 43.5809 26.5457 41.6973L43.0534 15.223C43.0709 15.1948 43.0878 15.1662 43.104 15.1371L41.3563 14.1648C43.104 15.1371 43.1038 15.1374 43.104 15.1371L43.1051 15.135L43.1065 15.1325L43.1101 15.1261L43.1199 15.1082C43.1276 15.094 43.1377 15.0754 43.1497 15.0527C43.1738 15.0075 43.2062 14.9455 43.244 14.8701C43.319 14.7208 43.4196 14.511 43.5217 14.2683C43.6901 13.8679 44 13.0689 44 12.2609C44 10.5573 43.003 9.22254 41.8558 8.2791C40.6947 7.32427 39.1354 6.55361 37.385 5.94477C33.8654 4.72057 29.133 4 24 4C18.867 4 14.1346 4.72057 10.615 5.94478C8.86463 6.55361 7.30529 7.32428 6.14419 8.27911C4.99695 9.22255 3.99999 10.5573 3.99999 12.2609C3.99999 13.1275 4.29264 13.9078 4.49321 14.3607C4.60375 14.6102 4.71348 14.8196 4.79687 14.9689C4.83898 15.0444 4.87547 15.1065 4.9035 15.1529C4.91754 15.1762 4.92954 15.1957 4.93916 15.2111L4.94662 15.223L4.95178 15.2312ZM35.9868 18.996L24 38.22L12.0131 18.996C12.4661 19.1391 12.9179 19.2658 13.3617 19.3718C16.4281 20.1039 20.0901 20.5217 24 20.5217C27.9099 20.5217 31.5719 20.1039 34.6383 19.3718C35.082 19.2658 35.5339 19.1391 35.9868 18.996Z"
                    fill="currentColor"
                  ></path>
                </svg>
              </div>
              <h2 class="text-[#1b0e0e] text-lg font-bold leading-tight tracking-[-0.015em]">FreshCart</h2>
            </div>
            <div class="flex items-center gap-9">
              <a class="text-[#1b0e0e] text-sm font-medium leading-normal" href="Home.html">Shop</a>
              <a class="text-[#1b0e0e] text-sm font-medium leading-normal" href="#">Deals</a>
              <a class="text-[#1b0e0e] text-sm font-medium leading-normal" href="#">What's New</a>
            </div>
          </div>
          <div class="flex flex-1 justify-end gap-8">
            <label class="flex flex-col min-w-40 !h-10 max-w-64">
              <div class="flex w-full flex-1 items-stretch rounded-xl h-full">
                <div
                  class="text-[#994d51] flex border-none bg-[#f3e7e8] items-center justify-center pl-4 rounded-l-xl border-r-0"
                  data-icon="MagnifyingGlass"
                  data-size="24px"
                  data-weight="regular"
                >
                  <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                    <path
                      d="M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"
                    ></path>
                  </svg>
                </div>
                <input
                  placeholder="Search"
                  class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-xl text-[#1b0e0e] focus:outline-0 focus:ring-0 border-none bg-[#f3e7e8] focus:border-none h-full placeholder:text-[#994d51] px-4 rounded-l-none border-l-0 pl-2 text-base font-normal leading-normal"
                  value=""
                />
              </div>
            </label>
            <div class="flex gap-2">
              <button
                class="flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 bg-[#f3e7e8] text-[#1b0e0e] gap-2 text-sm font-bold leading-normal tracking-[0.015em] min-w-0 px-2.5"
              >
                <div class="text-[#1b0e0e]" data-icon="Heart" data-size="20px" data-weight="regular">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" fill="currentColor" viewBox="0 0 256 256">
                    <path
                      d="M178,32c-20.65,0-38.73,8.88-50,23.89C116.73,40.88,98.65,32,78,32A62.07,62.07,0,0,0,16,94c0,70,103.79,126.66,108.21,129a8,8,0,0,0,7.58,0C136.21,220.66,240,164,240,94A62.07,62.07,0,0,0,178,32ZM128,206.8C109.74,196.16,32,147.69,32,94A46.06,46.06,0,0,1,78,48c19.45,0,35.78,10.36,42.6,27a8,8,0,0,0,14.8,0c6.82-16.67,23.15-27,42.6-27a46.06,46.06,0,0,1,46,46C224,147.61,146.24,196.15,128,206.8Z"
                    ></path>
                  </svg>
                </div>
              </button>
              <button
                class="flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 bg-[#f3e7e8] text-[#1b0e0e] gap-2 text-sm font-bold leading-normal tracking-[0.015em] min-w-0 px-2.5 relative"
                onclick="viewCart()"
              >
                <div class="text-[#1b0e0e]" data-icon="ShoppingCart" data-size="20px" data-weight="regular">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" fill="currentColor" viewBox="0 0 256 256">
                    <path
                      d="M222.14,58.87A8,8,0,0,0,216,56H54.68L49.79,29.14A16,16,0,0,0,34.05,16H16a8,8,0,0,0,0,16h18L59.56,172.29a24,24,0,0,0,5.33,11.27,28,28,0,1,0,44.4,8.44h45.42A27.75,27.75,0,0,0,152,204a28,28,0,1,0,28-28H83.17a8,8,0,0,1-7.87-6.57L72.13,152h116a24,24,0,0,0,23.61-19.71l12.16-66.86A8,8,0,0,0,222.14,58.87ZM96,204a12,12,0,1,1-12-12A12,12,0,0,1,96,204Zm96,0a12,12,0,1,1-12-12A12,12,0,0,1,192,204Zm4-74.57A8,8,0,0,1,188.1,136H69.22L57.59,72H206.41Z"
                    ></path>
                  </svg>
                </div>
                <div id="cart-count" class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center" style="display: none;">0</div>
              </button>
            </div>
            <div
              class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10"
              style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuBCOWAdkWP--JbxCUNknvTxa-ww6mC4LtzWtJqSNTM6VphYYX7zODCJVy_a14DLVkOay6YwZRF2OiHOAvQzSn-RAHC31nMMEzh6tjpciKChWlHYjWE03uESNfU3u_zof5-1W4Cbtfq8N0GYybXfoKnKHVDA62mvIWDGuBV6e47ORjlvU9_fysJXEFxYS5Zlxbceq0w3SLRhhLFEpjuIAhoCRH_uCIMRzWfwhn61rP5KiRdq51ucjWPyk_No4afaelH1qNY7NstI_94");'
            ></div>
          </div>
        </header>
        
        <div class="px-40 flex flex-1 justify-center py-5">
          <div class="layout-content-container flex flex-col max-w-[960px] flex-1">
            <!-- Back Button -->
            <div class="px-4 py-3">
              <button
                onclick="window.location.href='Home.html'"
                class="flex items-center gap-2 text-[#994d51] hover:text-[#7a3d41] transition-colors"
              >
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 256 256">
                  <path d="M224,128a8,8,0,0,1-8,8H59.31l58.35,58.34a8,8,0,0,1-11.32,11.32l-72-72a8,8,0,0,1,0-11.32l72-72a8,8,0,0,1,11.32,11.32L59.31,120H216A8,8,0,0,1,224,128Z"></path>
                </svg>
                Back to Shop
              </button>
            </div>
            
            <!-- Product Details -->
            <div class="px-4 py-3">
              <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 p-8">
                  <!-- Product Image -->
                  <div class="space-y-4">
                    <div
                      id="product-image"
                      class="w-full bg-center bg-no-repeat aspect-square bg-cover rounded-xl"
                      style="background-image: url('');"
                    ></div>
                    <div class="flex gap-2">
                      <div class="w-16 h-16 bg-gray-200 rounded-lg cursor-pointer border-2 border-[#e92932]"></div>
                      <div class="w-16 h-16 bg-gray-200 rounded-lg cursor-pointer"></div>
                      <div class="w-16 h-16 bg-gray-200 rounded-lg cursor-pointer"></div>
                    </div>
                  </div>
                  
                  <!-- Product Info -->
                  <div class="space-y-6">
                    <div>
                      <span id="product-category" class="text-[#994d51] text-sm font-medium bg-[#f3e7e8] px-3 py-1 rounded-full">Category</span>
                    </div>
                    
                    <div>
                      <h1 id="product-name" class="text-[#1b0e0e] text-3xl font-bold leading-tight tracking-[-0.015em] mb-2">Product Name</h1>
                      <p id="product-price" class="text-[#e92932] text-2xl font-bold">$0.00</p>
                    </div>
                    
                    <div>
                      <h3 class="text-[#1b0e0e] text-lg font-semibold mb-2">Description</h3>
                      <p id="product-description" class="text-[#666] text-base leading-relaxed">Product description will be loaded here.</p>
                    </div>
                    
                    <div class="space-y-4">
                      <div>
                        <label class="text-[#1b0e0e] text-sm font-medium mb-2 block">Quantity</label>
                        <div class="flex items-center gap-3">
                          <button onclick="updateQuantity(-1)" class="w-10 h-10 bg-[#f3e7e8] text-[#1b0e0e] rounded-lg flex items-center justify-center hover:bg-[#e7d0d1] transition-colors">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256">
                              <path d="M224,128a8,8,0,0,1-8,8H136v80a8,8,0,0,1-16,0V136H40a8,8,0,0,1,0-16h80V40a8,8,0,0,1,16,0v80h80a8,8,0,0,1,0,16Z"></path>
                            </svg>
                          </button>
                          <input
                            id="quantity"
                            type="number"
                            value="1"
                            min="1"
                            max="99"
                            class="w-16 h-10 text-center border border-[#e7d0d1] rounded-lg text-[#1b0e0e] font-medium"
                          />
                          <button onclick="updateQuantity(1)" class="w-10 h-10 bg-[#f3e7e8] text-[#1b0e0e] rounded-lg flex items-center justify-center hover:bg-[#e7d0d1] transition-colors">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256">
                              <path d="M224,128a8,8,0,0,1-8,8H136v80a8,8,0,0,1-16,0V136H40a8,8,0,0,1,0-16h80V40a8,8,0,0,1,16,0v80h80a8,8,0,0,1,0,16Z"></path>
                            </svg>
                          </button>
                        </div>
                      </div>
                      
                      <div class="flex gap-4">
                        <button
                          onclick="addToCart()"
                          class="flex-1 bg-[#e92932] text-white py-4 px-6 rounded-xl font-bold text-lg hover:bg-[#d4242d] transition-colors flex items-center justify-center gap-2"
                        >
                          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 256 256">
                            <path d="M222.14,58.87A8,8,0,0,0,216,56H54.68L49.79,29.14A16,16,0,0,0,34.05,16H16a8,8,0,0,0,0,16h18L59.56,172.29a24,24,0,0,0,5.33,11.27,28,28,0,1,0,44.4,8.44h45.42A27.75,27.75,0,0,0,152,204a28,28,0,1,0,28-28H83.17a8,8,0,0,1-7.87-6.57L72.13,152h116a24,24,0,0,0,23.61-19.71l12.16-66.86A8,8,0,0,0,222.14,58.87ZM96,204a12,12,0,1,1-12-12A12,12,0,0,1,96,204Zm96,0a12,12,0,1,1-12-12A12,12,0,0,1,192,204Zm4-74.57A8,8,0,0,1,188.1,136H69.22L57.59,72H206.41Z"></path>
                          </svg>
                          Add to Cart
                        </button>
                        <button
                          class="w-12 h-12 bg-[#f3e7e8] text-[#1b0e0e] rounded-xl flex items-center justify-center hover:bg-[#e7d0d1] transition-colors"
                        >
                          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 256 256">
                            <path d="M178,32c-20.65,0-38.73,8.88-50,23.89C116.73,40.88,98.65,32,78,32A62.07,62.07,0,0,0,16,94c0,70,103.79,126.66,108.21,129a8,8,0,0,0,7.58,0C136.21,220.66,240,164,240,94A62.07,62.07,0,0,0,178,32ZM128,206.8C109.74,196.16,32,147.69,32,94A46.06,46.06,0,0,1,78,48c19.45,0,35.78,10.36,42.6,27a8,8,0,0,0,14.8,0c6.82-16.67,23.15-27,42.6-27a46.06,46.06,0,0,1,46,46C224,147.61,146.24,196.15,128,206.8Z"></path>
                          </svg>
                        </button>
                      </div>
                    </div>
                    
                    <!-- Product Features -->
                    <div class="border-t border-[#e7d0d1] pt-6">
                      <h3 class="text-[#1b0e0e] text-lg font-semibold mb-4">Product Features</h3>
                      <div class="space-y-3">
                        <div class="flex items-center gap-3">
                          <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                          <span class="text-[#666] text-sm">Fresh and high quality</span>
                        </div>
                        <div class="flex items-center gap-3">
                          <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                          <span class="text-[#666] text-sm">Fast delivery available</span>
                        </div>
                        <div class="flex items-center gap-3">
                          <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                          <span class="text-[#666] text-sm">Easy returns</span>
                        </div>
                      </div>
                    </div>
                    
                    <!-- Reviews Section -->
                    <div class="border-t border-[#e7d0d1] pt-6">
                      <div class="flex items-center justify-between mb-4">
                        <h3 class="text-[#1b0e0e] text-lg font-semibold">Customer Reviews</h3>
                        <button onclick="showAddReviewModal()" class="text-[#994d51] hover:text-[#7a3d41] text-sm font-medium">
                          Write a Review
                        </button>
                      </div>
                      
                      <!-- Rating Display -->
                      <div id="product-rating" class="mb-4">
                        <!-- Rating will be populated by JavaScript -->
                      </div>
                      
                      <!-- Reviews List -->
                      <div id="reviews-container" class="space-y-4">
                        <!-- Reviews will be populated by JavaScript -->
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Related Products -->
            <div class="px-4 py-8">
              <h2 class="text-[#1b0e0e] text-[22px] font-bold leading-tight tracking-[-0.015em] mb-6">You might also like</h2>
              <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div class="bg-white rounded-xl p-4 shadow-sm hover:shadow-md transition-shadow cursor-pointer" onclick="viewProduct('Milk', '$2.99', 'https://lh3.googleusercontent.com/aida-public/AB6AXuCiPlRNzi7xtuMbX3VoTQAKLhfcRnLdf3g3S2AQsfd0EJ6XWmuH32lKQ9frua0XaJY1N86RCnAzAM9D9ebg7rT_-UQYWvRTc7oBxDeHmck9tmqwjBo1nyj2lUUvbNogcWzo0rap5RHS2B9ckQBvBdbTIlmaoC5uhYmr5p6W6TTt5A95xSpQLepdeHVDWUBdc361ku6lYe0-11EaRVudvdd0XtjVS26d149ECJ0PkL_cCNpSglafmQgPZLARZvvEgQ3ShHEl7xDTzyk', 'Fresh whole milk, rich in calcium and essential nutrients.', 'Dairy')">
                  <div class="w-full bg-center bg-no-repeat aspect-square bg-cover rounded-lg mb-3" style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuCiPlRNzi7xtuMbX3VoTQAKLhfcRnLdf3g3S2AQsfd0EJ6XWmuH32lKQ9frua0XaJY1N86RCnAzAM9D9ebg7rT_-UQYWvRTc7oBxDeHmck9tmqwjBo1nyj2lUUvbNogcWzo0rap5RHS2B9ckQBvBdbTIlmaoC5uhYmr5p6W6TTt5A95xSpQLepdeHVDWUBdc361ku6lYe0-11EaRVudvdd0XtjVS26d149ECJ0PkL_cCNpSglafmQgPZLARZvvEgQ3ShHEl7xDTzyk');"></div>
                  <h3 class="text-[#1b0e0e] font-medium">Milk</h3>
                  <p class="text-[#994d51] text-sm">$2.99</p>
                </div>
                <div class="bg-white rounded-xl p-4 shadow-sm hover:shadow-md transition-shadow cursor-pointer" onclick="viewProduct('Eggs', '$3.49', 'https://lh3.googleusercontent.com/aida-public/AB6AXuDyXjeE94_jL5hQLBSfb3u-ji53N_AmvLf7mRRjcULETDV-LJS-U8Sh92ulGOlBBClW1XwBWfmTttEHMLAZILZCuo0L1S5phDC6da882e3TI_0qjFgJHLCAoaWdp8dPWXYo-275AUq83xWraxLmHxty6HywE878KfhMVs5vKwK3pbcg7Ymj4VS0LZANUak0fP4C60vyc8FAtMMHxAx6o3M1XEmtmct9QNoRActKLi2okOtuH7CBcHAzniuzFJuTkwWOyPd0SYe2mH8', 'Farm fresh eggs, high in protein and essential vitamins.', 'Dairy')">
                  <div class="w-full bg-center bg-no-repeat aspect-square bg-cover rounded-lg mb-3" style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuDyXjeE94_jL5hQLBSfb3u-ji53N_AmvLf7mRRjcULETDV-LJS-U8Sh92ulGOlBBClW1XwBWfmTttEHMLAZILZCuo0L1S5phDC6da882e3TI_0qjFgJHLCAoaWdp8dPWXYo-275AUq83xWraxLmHxty6HywE878KfhMVs5vKwK3pbcg7Ymj4VS0LZANUak0fP4C60vyc8FAtMMHxAx6o3M1XEmtmct9QNoRActKLi2okOtuH7CBcHAzniuzFJuTkwWOyPd0SYe2mH8');"></div>
                  <h3 class="text-[#1b0e0e] font-medium">Eggs</h3>
                  <p class="text-[#994d51] text-sm">$3.49</p>
                </div>
                <div class="bg-white rounded-xl p-4 shadow-sm hover:shadow-md transition-shadow cursor-pointer" onclick="viewProduct('Bread', '$2.79', 'https://lh3.googleusercontent.com/aida-public/AB6AXuBazxMNLwhtntO6j7GZn_uIAk2qgFPrN_h8_wsL1kM1yDbULNQteF82WFoEFzQDdvBXyg07L2o5L57FiJVN7W_2mfKdXME8TN8qWvKEEmLe1wiE82POGbWwwpbuKhYxrjkpSgPHxSb6_PgCKRTSn4B2s_5g3hceUSobmzJWxHzQAff3L9Es-R1lSNl2puVDY5VsY9kZMm6WCKGim3Ym4GYKEcZaOsLDQZZya5BwDKBei3q0rhzfcvVIq9iOLUrOi1VsBh9LC3jqbKk', 'Fresh whole wheat bread, soft and nutritious.', 'Bakery')">
                  <div class="w-full bg-center bg-no-repeat aspect-square bg-cover rounded-lg mb-3" style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuBazxMNLwhtntO6j7GZn_uIAk2qgFPrN_h8_wsL1kM1yDbULNQteF82WFoEFzQDdvBXyg07L2o5L57FiJVN7W_2mfKdXME8TN8qWvKEEmLe1wiE82POGbWwwpbuKhYxrjkpSgPHxSb6_PgCKRTSn4B2s_5g3hceUSobmzJWxHzQAff3L9Es-R1lSNl2puVDY5VsY9kZMm6WCKGim3Ym4GYKEcZaOsLDQZZya5BwDKBei3q0rhzfcvVIq9iOLUrOi1VsBh9LC3jqbKk');"></div>
                  <h3 class="text-[#1b0e0e] font-medium">Bread</h3>
                  <p class="text-[#994d51] text-sm">$2.79</p>
                </div>
                <div class="bg-white rounded-xl p-4 shadow-sm hover:shadow-md transition-shadow cursor-pointer" onclick="viewProduct('Cheese', '$4.99', 'https://lh3.googleusercontent.com/aida-public/AB6AXuDBmo4zTbLeKyfviliUMaW4QWKszcoSJFtNNtzwkwbJjfYLBDkRF5s4pABG0yqr0qzbqaLMl6Kow1PMBsG8OFOV8nVKbW0oxfE4ydF05eLxBKOz47W5cH8Q4Ey-5MVrn8fX6x5ZNMIkHQMEYN-R-gLLLjEzkeVyVKDJljVE51G9aO-fs0Odlip4V9qbEAbvs_9bg7qpSh6ErWws-rQNYT-HcjO1to67epVijCkpPMDD6cIj-zeNV6I7BtemFw7dQ5i7aXt6kq-Iodc', 'Premium cheddar cheese, rich and creamy.', 'Dairy')">
                  <div class="w-full bg-center bg-no-repeat aspect-square bg-cover rounded-lg mb-3" style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuDBmo4zTbLeKyfviliUMaW4QWKszcoSJFtNNtzwkwbJjfYLBDkRF5s4pABG0yqr0qzbqaLMl6Kow1PMBsG8OFOV8nVKbW0oxfE4ydF05eLxBKOz47W5cH8Q4Ey-5MVrn8fX6x5ZNMIkHQMEYN-R-gLLLjEzkeVyVKDJljVE51G9aO-fs0Odlip4V9qbEAbvs_9bg7qpSh6ErWws-rQNYT-HcjO1to67epVijCkpPMDD6cIj-zeNV6I7BtemFw7dQ5i7aXt6kq-Iodc');"></div>
                  <h3 class="text-[#1b0e0e] font-medium">Cheese</h3>
                  <p class="text-[#994d51] text-sm">$4.99</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Update quantity function
      function updateQuantity(change) {
        const quantityInput = document.getElementById('quantity');
        let currentValue = parseInt(quantityInput.value);
        let newValue = currentValue + change;
        
        if (newValue < 1) newValue = 1;
        if (newValue > 99) newValue = 99;
        
        quantityInput.value = newValue;
      }
      
      // View product function for related products
      function viewProduct(name, price, image, description, category) {
        const params = new URLSearchParams({
          name: name,
          price: price,
          image: image,
          description: description,
          category: category
        });
        window.location.href = `product-detail.html?${params.toString()}`;
      }
    </script>
  </body>
</html> 