<html>
  <head>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
    <link
      rel="stylesheet"
      as="style"
      onload="this.rel='stylesheet'"
      href="https://fonts.googleapis.com/css2?display=swap&amp;family=Noto+Sans%3Awght%40400%3B500%3B700%3B900&amp;family=Plus+Jakarta+Sans%3Awght%40400%3B500%3B700%3B800"
    />

    <title>Stitch Design</title>
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64," />

    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  </head>
  <body>
    <div class="relative flex size-full min-h-screen flex-col bg-[#fcf8f8] group/design-root overflow-x-hidden" style='font-family: "Plus Jakarta Sans", "Noto Sans", sans-serif;'>
      <div class="layout-container flex h-full grow flex-col">
        <header class="flex items-center justify-between whitespace-nowrap border-b border-solid border-b-[#f3e7e8] px-10 py-3">
          <div class="flex items-center gap-4 text-[#1b0e0f]">
            <button onclick="window.location.href='Home.html'" class="flex items-center gap-2 text-[#1b0e0f] hover:text-[#994d51] transition-colors">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
              </svg>
              <span class="text-sm font-medium">Back to Home</span>
            </button>
            <div class="size-4">
              <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0_6_535)">
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M47.2426 24L24 47.2426L0.757355 24L24 0.757355L47.2426 24ZM12.2426 21H35.7574L24 9.24264L12.2426 21Z"
                    fill="currentColor"
                  ></path>
                </g>
                <defs>
                  <clipPath id="clip0_6_535"><rect width="48" height="48" fill="white"></rect></clipPath>
                </defs>
              </svg>
            </div>
            <h2 class="text-[#1b0e0f] text-lg font-bold leading-tight tracking-[-0.015em]">FreshFoods</h2>
          </div>
          <div class="flex flex-1 justify-end gap-8">
            <div class="flex items-center gap-9">
              <a class="text-[#1b0e0f] text-sm font-medium leading-normal" href="#">Shop</a>
              <a class="text-[#1b0e0f] text-sm font-medium leading-normal" href="#">Deals</a>
              <a class="text-[#1b0e0f] text-sm font-medium leading-normal" href="#">Pickup</a>
              <a class="text-[#1b0e0f] text-sm font-medium leading-normal" href="#">Subscriptions</a>
            </div>
            <div class="flex gap-2">
              <button
                class="flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 bg-[#f3e7e8] text-[#1b0e0f] gap-2 text-sm font-bold leading-normal tracking-[0.015em] min-w-0 px-2.5"
              >
                <div class="text-[#1b0e0f]" data-icon="MagnifyingGlass" data-size="20px" data-weight="regular">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" fill="currentColor" viewBox="0 0 256 256">
                    <path
                      d="M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"
                    ></path>
                  </svg>
                </div>
              </button>
              <button
                class="flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 bg-[#f3e7e8] text-[#1b0e0f] gap-2 text-sm font-bold leading-normal tracking-[0.015em] min-w-0 px-2.5"
              >
                <div class="text-[#1b0e0f]" data-icon="ShoppingCart" data-size="20px" data-weight="regular">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" fill="currentColor" viewBox="0 0 256 256">
                    <path
                      d="M222.14,58.87A8,8,0,0,0,216,56H54.68L49.79,29.14A16,16,0,0,0,34.05,16H16a8,8,0,0,0,0,16h18L59.56,172.29a24,24,0,0,0,5.33,11.27,28,28,0,1,0,44.4,8.44h45.42A27.75,27.75,0,0,0,152,204a28,28,0,1,0,28-28H83.17a8,8,0,0,1-7.87-6.57L72.13,152h116a24,24,0,0,0,23.61-19.71l12.16-66.86A8,8,0,0,0,222.14,58.87ZM96,204a12,12,0,1,1-12-12A12,12,0,0,1,96,204Zm96,0a12,12,0,1,1-12-12A12,12,0,0,1,192,204Zm4-74.57A8,8,0,0,1,188.1,136H69.22L57.59,72H206.41Z"
                    ></path>
                  </svg>
                </div>
              </button>
            </div>
            <div
              class="bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10"
              style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuD7dZ-OZQ5qbMem2xyzUHy2F5kIUDMt7gRQm5TVSe5ALORKMt1KS6Lj6BDggpMKOGlM0p4_cfB9sWHhXV6YQnl7NLaE68GGM9cj_EaTCLLxmZtB2CGW-futrsrnb4gdnPBmk3F9jdVMYEq0tJCNlRF5wlbjYCbVRF2s5cZogYTFi_MGpcUiP7Mt4WPi9RCA2OHhUFQL9m5n3NjCrD22WlqnmYr-w3_mivR-zOA2nH2NwkXQB7jMCrbphG5O8607hpXvpcIcKEbL9HU");'
            ></div>
          </div>
        </header>
        <div class="px-40 flex flex-1 justify-center py-5">
          <div class="layout-content-container flex flex-col w-[512px] max-w-[512px] py-5 max-w-[960px] flex-1">
            <div class="flex flex-wrap justify-between gap-3 p-4"><p class="text-[#1b0e0f] tracking-light text-[32px] font-bold leading-tight min-w-72">Edit Profile</p></div>
            
            <!-- Profile Photo Section -->
            <div class="bg-white rounded-xl shadow-md p-6 mb-6 mx-4">
                <h3 class="text-xl font-bold mb-4 text-[#994d51]">Profile Photo</h3>
                <div class="flex flex-col items-center gap-4">
                    <div class="relative">
                        <div id="profile-photo-preview" class="w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden border-4 border-[#f3e7e8]">
                            <img id="profile-photo-img" src="" alt="Profile Photo" class="w-full h-full object-cover hidden" />
                            <svg id="profile-photo-placeholder" class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                            </svg>
                        </div>
                        <button onclick="document.getElementById('profile-photo-input').click()" class="absolute bottom-0 right-0 bg-[#994d51] text-white p-2 rounded-full hover:bg-[#7a3d41] transition-colors">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"></path>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"></path>
                            </svg>
                        </button>
                    </div>
                    <input type="file" id="profile-photo-input" accept="image/*" class="hidden" onchange="handleProfilePhotoUpload(event)" />
                    <div class="flex gap-3">
                        <button onclick="document.getElementById('profile-photo-input').click()" class="bg-[#994d51] text-white px-4 py-2 rounded-lg font-medium hover:bg-[#7a3d41] transition-colors">
                            Upload Photo
                        </button>
                        <button onclick="removeProfilePhoto()" class="bg-gray-500 text-white px-4 py-2 rounded-lg font-medium hover:bg-gray-600 transition-colors">
                            Remove Photo
                        </button>
                    </div>
                    <p class="text-sm text-gray-600 text-center">Upload a profile photo to personalize your account</p>
                </div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
              <div class="flex flex-col gap-2">
                <label class="block text-[#1b0e0e] font-medium mb-2">First Name</label>
                <input id="firstname-input" type="text" placeholder="Enter your first name" class="w-full px-4 py-2 border rounded-lg" oninput="validateFirstName()" />
                <p id="firstname-error" class="text-red-600 text-xs mt-1 hidden">Please enter a valid first name (letters and spaces only).</p>
              </div>
              <div class="flex flex-col gap-2">
                <label class="block text-[#1b0e0e] font-medium mb-2">Last Name</label>
                <input id="lastname-input" type="text" placeholder="Enter your last name" class="w-full px-4 py-2 border rounded-lg" oninput="validateLastName()" />
                <p id="lastname-error" class="text-red-600 text-xs mt-1 hidden">Please enter a valid last name (letters and spaces only).</p>
              </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
              <div class="flex flex-col gap-2">
                <label class="block text-[#1b0e0e] font-medium mb-2">Email Address</label>
                <input id="email-input" type="email" placeholder="Enter your email address" class="w-full px-4 py-2 border rounded-lg" oninput="validateEmail()" />
                <p id="email-error" class="text-red-600 text-xs mt-1 hidden">Please enter a valid email address.</p>
              </div>
              <div class="flex flex-col gap-2">
                <label class="block text-[#1b0e0e] font-medium mb-2">Phone Number</label>
                <input id="phone-input" type="tel" maxlength="10" placeholder="Enter 10-digit phone number" class="w-full px-4 py-2 border rounded-lg" oninput="validatePhone()" />
                <p id="phone-error" class="text-red-600 text-xs mt-1 hidden">Please enter a valid 10-digit phone number.</p>
              </div>
            </div>
            <div class="flex flex-col md:flex-row gap-4 mb-4">
              <div class="flex-1">
                <label class="block text-[#1b0e0e] font-medium mb-2">Delivery Address</label>
                <input type="text" placeholder="Enter your delivery address" class="w-full px-4 py-2 border rounded-lg" />
              </div>
              <div class="w-full md:w-1/3 flex flex-col gap-2">
                <label class="block text-[#1b0e0e] font-medium mb-2">Pin Code</label>
                <input id="pincode-input" type="text" maxlength="6" pattern="[0-9]{6}" placeholder="e.g. 110001" class="w-full px-4 py-2 border rounded-lg" oninput="handlePincodeInput()" />
                <p id="pincode-error" class="text-red-600 text-xs mt-1 hidden">Please enter a valid 6-digit pin code.</p>
                <p id="pincode-city" class="text-green-700 text-xs mt-1"></p>
              </div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
              <div class="flex flex-col gap-2">
                <label class="block text-[#1b0e0e] font-medium mb-2">State</label>
                <input id="state-input" type="text" placeholder="State" class="w-full px-4 py-2 border rounded-lg bg-gray-100" readonly />
              </div>
              <div class="flex flex-col gap-2">
                <label class="block text-[#1b0e0e] font-medium mb-2">District</label>
                <input id="district-input" type="text" placeholder="District" class="w-full px-4 py-2 border rounded-lg bg-gray-100" readonly />
              </div>
              <div class="flex flex-col gap-2">
                <label class="block text-[#1b0e0e] font-medium mb-2">Area</label>
                <input id="area-input" type="text" placeholder="Area" class="w-full px-4 py-2 border rounded-lg bg-gray-100" readonly />
              </div>
            </div>
            <h3 class="text-[#1b0e0f] text-lg font-bold leading-tight tracking-[-0.015em] px-4 pb-2 pt-4">Payment Methods</h3>
            <div id="saved-payment-methods" class="px-4 py-3">
              <!-- Saved payment methods will be displayed here -->
            </div>
            <div class="px-4 py-3">
              <button onclick="togglePaymentMethods()" class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 px-4 flex-1 bg-[#f3e7e8] text-[#1b0e0f] text-sm font-bold leading-normal tracking-[0.015em]">
                <span class="truncate">Add Payment Method</span>
              </button>
            </div>
            <div id="payment-methods-section" class="hidden px-4 py-3">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                <div class="border rounded-lg p-4 cursor-pointer hover:bg-gray-50" onclick="selectPaymentMethod('card')">
                  <h4 class="font-medium mb-2">Credit/Debit Card</h4>
                  <input id="card-number" type="text" placeholder="Card Number" class="w-full mb-2 px-3 py-2 border rounded" />
                  <div class="flex gap-2">
                    <input id="card-expiry" type="text" placeholder="MM/YY" class="w-1/2 px-3 py-2 border rounded" />
                    <input id="card-cvv" type="text" placeholder="CVV" class="w-1/2 px-3 py-2 border rounded" />
                  </div>
                </div>
                <div class="border rounded-lg p-4 cursor-pointer hover:bg-gray-50" onclick="selectPaymentMethod('upi')">
                  <h4 class="font-medium mb-2">UPI</h4>
                  <input id="upi-id" type="text" placeholder="UPI ID (e.g., user@upi)" class="w-full px-3 py-2 border rounded" />
                </div>
              </div>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                <div class="border rounded-lg p-4 cursor-pointer hover:bg-gray-50" onclick="selectPaymentMethod('netbanking')">
                  <h4 class="font-medium mb-2">Net Banking</h4>
                  <select id="bank-select" class="w-full px-3 py-2 border rounded">
                    <option>Select Bank</option>
                    <option>SBI</option>
                    <option>HDFC</option>
                    <option>ICICI</option>
                    <option>Axis</option>
                  </select>
                </div>
                <div class="border rounded-lg p-4 cursor-pointer hover:bg-gray-50" onclick="selectPaymentMethod('wallet')">
                  <h4 class="font-medium mb-2">Digital Wallets</h4>
                  <select id="wallet-select" class="w-full px-3 py-2 border rounded">
                    <option>Select Wallet</option>
                    <option>Paytm</option>
                    <option>PhonePe</option>
                    <option>Google Pay</option>
                    <option>Amazon Pay</option>
                  </select>
                </div>
              </div>
              <div class="border rounded-lg p-4 cursor-pointer hover:bg-gray-50 mb-4" onclick="selectPaymentMethod('cod')">
                <h4 class="font-medium mb-2">Cash on Delivery</h4>
                <p class="text-sm text-gray-600">Pay when you receive your order</p>
              </div>
              <button onclick="savePaymentMethod()" class="w-full bg-[#994d51] text-white py-2 rounded-lg font-medium hover:bg-[#7a3d41] transition-colors">Save Payment Method</button>
            </div>
            <h3 class="text-[#1b0e0f] text-lg font-bold leading-tight tracking-[-0.015em] px-4 pb-2 pt-4">Notifications</h3>
            <div class="flex items-center gap-4 bg-[#fcf8f8] px-4 min-h-14 justify-between">
              <p class="text-[#1b0e0f] text-base font-normal leading-normal flex-1 truncate">Order Updates</p>
              <div class="shrink-0">
                <label
                  class="relative flex h-[31px] w-[51px] cursor-pointer items-center rounded-full border-none bg-[#f3e7e8] p-0.5 has-[:checked]:justify-end has-[:checked]:bg-[#e82630]"
                >
                  <div class="h-full w-[27px] rounded-full bg-white" style="box-shadow: rgba(0, 0, 0, 0.15) 0px 3px 8px, rgba(0, 0, 0, 0.06) 0px 3px 1px;"></div>
                  <input type="checkbox" class="invisible absolute" />
                </label>
              </div>
            </div>
            <div class="flex items-center gap-4 bg-[#fcf8f8] px-4 min-h-14 justify-between">
              <p class="text-[#1b0e0f] text-base font-normal leading-normal flex-1 truncate">Promotions</p>
              <div class="shrink-0">
                <label
                  class="relative flex h-[31px] w-[51px] cursor-pointer items-center rounded-full border-none bg-[#f3e7e8] p-0.5 has-[:checked]:justify-end has-[:checked]:bg-[#e82630]"
                >
                  <div class="h-full w-[27px] rounded-full bg-white" style="box-shadow: rgba(0, 0, 0, 0.15) 0px 3px 8px, rgba(0, 0, 0, 0.06) 0px 3px 1px;"></div>
                  <input type="checkbox" class="invisible absolute" />
                </label>
              </div>
            </div>
            <div class="flex px-4 py-3">
              <button
                onclick="updateProfile()"
                class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-12 px-5 flex-1 bg-[#e82630] text-[#fcf8f8] text-base font-bold leading-normal tracking-[0.015em]"
              >
                <span class="truncate">Update Profile</span>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
async function handlePincodeInput() {
  const pincode = document.getElementById('pincode-input').value;
  const error = document.getElementById('pincode-error');
  const city = document.getElementById('pincode-city');
  const stateInput = document.getElementById('state-input');
  const districtInput = document.getElementById('district-input');
  const areaInput = document.getElementById('area-input');
  
  error.classList.add('hidden');
  city.textContent = '';
  stateInput.value = '';
  districtInput.value = '';
  areaInput.value = '';

  if (/^\d{6}$/.test(pincode)) {
    city.textContent = 'Looking up area...';
    city.classList.remove('text-red-600');
    city.classList.remove('text-green-700');
    try {
      const response = await fetch(`https://api.postalpincode.in/pincode/${pincode}`);
      const data = await response.json();
      if (data[0].Status === 'Success' && data[0].PostOffice && data[0].PostOffice.length > 0) {
        const postOffice = data[0].PostOffice[0];
        city.textContent = `Area: ${postOffice.Name}, District: ${postOffice.District}, State: ${postOffice.State}`;
        city.classList.add('text-green-700');
        
        // Auto-fill all related fields
        stateInput.value = postOffice.State;
        districtInput.value = postOffice.District;
        areaInput.value = postOffice.Name;
      } else {
        city.textContent = 'Area: (Unknown/Not found)';
        city.classList.add('text-red-600');
        stateInput.value = '';
        districtInput.value = '';
        areaInput.value = '';
      }
    } catch (e) {
      city.textContent = 'Error looking up area.';
      city.classList.add('text-red-600');
      stateInput.value = '';
      districtInput.value = '';
      areaInput.value = '';
    }
  } else if (pincode.length === 6) {
    error.classList.remove('hidden');
    city.textContent = '';
    stateInput.value = '';
    districtInput.value = '';
    areaInput.value = '';
  }
}

function validateFirstName() {
  const input = document.getElementById('firstname-input');
  const error = document.getElementById('firstname-error');
  const value = input.value;
  const cleanValue = value.replace(/[^a-zA-Z\s]/g, '');
  if (value !== cleanValue) {
    input.value = cleanValue;
  }
  if (value.length > 0 && !/^[a-zA-Z\s]+$/.test(value)) {
    error.classList.remove('hidden');
    input.classList.add('border-red-500');
  } else {
    error.classList.add('hidden');
    input.classList.remove('border-red-500');
  }
}
function validateLastName() {
  const input = document.getElementById('lastname-input');
  const error = document.getElementById('lastname-error');
  const value = input.value;
  const cleanValue = value.replace(/[^a-zA-Z\s]/g, '');
  if (value !== cleanValue) {
    input.value = cleanValue;
  }
  if (value.length > 0 && !/^[a-zA-Z\s]+$/.test(value)) {
    error.classList.remove('hidden');
    input.classList.add('border-red-500');
  } else {
    error.classList.add('hidden');
    input.classList.remove('border-red-500');
  }
}

function validateEmail() {
  const input = document.getElementById('email-input');
  const error = document.getElementById('email-error');
  const value = input.value;
  
  if (value.length > 0 && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(value)) {
    error.classList.remove('hidden');
    input.classList.add('border-red-500');
  } else {
    error.classList.add('hidden');
    input.classList.remove('border-red-500');
  }
}

function validatePhone() {
  const input = document.getElementById('phone-input');
  const error = document.getElementById('phone-error');
  const value = input.value.replace(/[^0-9]/g, '');
  
  input.value = value;
  
  if (value.length > 0 && value.length !== 10) {
    error.classList.remove('hidden');
    input.classList.add('border-red-500');
  } else {
    error.classList.add('hidden');
    input.classList.remove('border-red-500');
  }
}

function validateProfileForm() {
  const pincode = document.getElementById('pincode-input').value;
  const firstname = document.getElementById('firstname-input').value;
  const lastname = document.getElementById('lastname-input').value;
  const email = document.getElementById('email-input').value;
  const phone = document.getElementById('phone-input').value;
  // Validate all fields
  if (!/^[a-zA-Z\s]+$/.test(firstname) || firstname.length === 0) {
    document.getElementById('firstname-error').classList.remove('hidden');
    document.getElementById('firstname-input').focus();
    return false;
  }
  if (!/^[a-zA-Z\s]+$/.test(lastname) || lastname.length === 0) {
    document.getElementById('lastname-error').classList.remove('hidden');
    document.getElementById('lastname-input').focus();
    return false;
  }
  if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email) || email.length === 0) {
    document.getElementById('email-error').classList.remove('hidden');
    document.getElementById('email-input').focus();
    return false;
  }
  if (!/^\d{10}$/.test(phone) || phone.length === 0) {
    document.getElementById('phone-error').classList.remove('hidden');
    document.getElementById('phone-input').focus();
    return false;
  }
  if (!/^\d{6}$/.test(pincode)) {
    document.getElementById('pincode-error').classList.remove('hidden');
    document.getElementById('pincode-input').focus();
    return false;
  }
  return true;
}

let selectedPaymentMethod = null;
let savedPaymentMethods = JSON.parse(localStorage.getItem('savedPaymentMethods') || '[]');

function loadSavedPaymentMethods() {
  const container = document.getElementById('saved-payment-methods');
  if (savedPaymentMethods.length === 0) {
    container.innerHTML = '<p class="text-gray-500 text-sm">No payment methods saved yet.</p>';
    return;
  }
  
  container.innerHTML = savedPaymentMethods.map((method, index) => `
    <div class="flex items-center justify-between bg-[#fcf8f8] p-3 rounded-lg mb-2">
      <div class="flex items-center gap-3">
        <div class="w-8 h-8 bg-[#994d51] rounded-full flex items-center justify-center text-white text-xs font-bold">
          ${method.type.charAt(0).toUpperCase()}
        </div>
        <div>
          <p class="font-medium">${method.name}</p>
          <p class="text-sm text-gray-600">${method.details}</p>
        </div>
      </div>
      <button onclick="removePaymentMethod(${index})" class="text-red-500 hover:text-red-700">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
        </svg>
      </button>
    </div>
  `).join('');
}

function togglePaymentMethods() {
  const section = document.getElementById('payment-methods-section');
  section.classList.toggle('hidden');
  // Reset form when opening
  if (!section.classList.contains('hidden')) {
    resetPaymentForm();
  }
}

function resetPaymentForm() {
  document.getElementById('card-number').value = '';
  document.getElementById('card-expiry').value = '';
  document.getElementById('card-cvv').value = '';
  document.getElementById('upi-id').value = '';
  document.getElementById('bank-select').selectedIndex = 0;
  document.getElementById('wallet-select').selectedIndex = 0;
  selectedPaymentMethod = null;
  
  // Remove previous selections
  document.querySelectorAll('#payment-methods-section > div > div').forEach(div => {
    div.classList.remove('border-blue-500', 'bg-blue-50');
  });
}

function selectPaymentMethod(method) {
  selectedPaymentMethod = method;
  
  // Remove previous selections
  document.querySelectorAll('#payment-methods-section > div > div').forEach(div => {
    div.classList.remove('border-blue-500', 'bg-blue-50');
  });
  
  // Highlight selected method
  event.currentTarget.classList.add('border-blue-500', 'bg-blue-50');
}

function savePaymentMethod() {
  if (!selectedPaymentMethod) {
    alert('Please select a payment method first.');
    return;
  }
  
  let methodData = { type: selectedPaymentMethod };
  
  switch (selectedPaymentMethod) {
    case 'card':
      const cardNumber = document.getElementById('card-number').value;
      const cardExpiry = document.getElementById('card-expiry').value;
      if (!cardNumber || !cardExpiry) {
        alert('Please fill in all card details.');
        return;
      }
      methodData.name = 'Credit/Debit Card';
      methodData.details = `****${cardNumber.slice(-4)} | Expires ${cardExpiry}`;
      break;
      
    case 'upi':
      const upiId = document.getElementById('upi-id').value;
      if (!upiId) {
        alert('Please enter UPI ID.');
        return;
      }
      methodData.name = 'UPI';
      methodData.details = upiId;
      break;
      
    case 'netbanking':
      const bank = document.getElementById('bank-select').value;
      if (bank === 'Select Bank') {
        alert('Please select a bank.');
        return;
      }
      methodData.name = 'Net Banking';
      methodData.details = bank;
      break;
      
    case 'wallet':
      const wallet = document.getElementById('wallet-select').value;
      if (wallet === 'Select Wallet') {
        alert('Please select a wallet.');
        return;
      }
      methodData.name = 'Digital Wallet';
      methodData.details = wallet;
      break;
      
    case 'cod':
      methodData.name = 'Cash on Delivery';
      methodData.details = 'Pay when you receive your order';
      break;
  }
  
  savedPaymentMethods.push(methodData);
  localStorage.setItem('savedPaymentMethods', JSON.stringify(savedPaymentMethods));
  
  loadSavedPaymentMethods();
  document.getElementById('payment-methods-section').classList.add('hidden');
  alert('Payment method saved successfully!');
}

function removePaymentMethod(index) {
  if (confirm('Are you sure you want to remove this payment method?')) {
    savedPaymentMethods.splice(index, 1);
    localStorage.setItem('savedPaymentMethods', JSON.stringify(savedPaymentMethods));
    loadSavedPaymentMethods();
  }
}

function handleProfilePhotoUpload(event) {
    const file = event.target.files[0];
    if (file) {
        if (file.size > 5 * 1024 * 1024) { // 5MB limit
            alert('File size should be less than 5MB');
            return;
        }
        
        const reader = new FileReader();
        reader.onload = function(e) {
            const img = document.getElementById('profile-photo-img');
            const placeholder = document.getElementById('profile-photo-placeholder');
            
            img.src = e.target.result;
            img.classList.remove('hidden');
            placeholder.classList.add('hidden');
            
            // Save to localStorage
            localStorage.setItem('profilePhoto', e.target.result);
            
            alert('Profile photo uploaded successfully!');
        };
        reader.readAsDataURL(file);
    }
}

function removeProfilePhoto() {
    if (confirm('Are you sure you want to remove your profile photo?')) {
        const img = document.getElementById('profile-photo-img');
        const placeholder = document.getElementById('profile-photo-placeholder');
        
        img.src = '';
        img.classList.add('hidden');
        placeholder.classList.remove('hidden');
        
        // Remove from localStorage
        localStorage.removeItem('profilePhoto');
        
        alert('Profile photo removed successfully!');
    }
}

function loadProfilePhoto() {
    const savedPhoto = localStorage.getItem('profilePhoto');
    if (savedPhoto) {
        const img = document.getElementById('profile-photo-img');
        const placeholder = document.getElementById('profile-photo-placeholder');
        
        img.src = savedPhoto;
        img.classList.remove('hidden');
        placeholder.classList.add('hidden');
    }
}

function updateProfile() {
    // Validate all required fields
    if (!validateProfileForm()) {
        return;
    }
    
    // Collect all form data
    const profileData = {
        firstName: document.getElementById('firstname-input').value,
        lastName: document.getElementById('lastname-input').value,
        email: document.getElementById('email-input').value,
        phone: document.getElementById('phone-input').value,
        deliveryAddress: document.querySelector('input[placeholder="Enter your delivery address"]').value,
        pinCode: document.getElementById('pincode-input').value,
        state: document.getElementById('state-input').value,
        district: document.getElementById('district-input').value,
        area: document.getElementById('area-input').value,
        paymentMethods: savedPaymentMethods,
        profilePhoto: localStorage.getItem('profilePhoto'), // Include profile photo
        lastUpdated: new Date().toISOString()
    };
    
    // Save to localStorage
    localStorage.setItem('userProfile', JSON.stringify(profileData));
    
    // Show success message
    alert('Profile updated successfully! Your information has been saved.');
    
    // Redirect to accounts.html page
    window.location.href = 'accounts.html';
    
    // Optionally, you can also save to a backend here
    console.log('Profile data saved:', profileData);
}

function loadProfileData() {
  const savedProfile = localStorage.getItem('userProfile');
  if (savedProfile) {
    const profileData = JSON.parse(savedProfile);
    
    // Fill in the form fields with saved data
    document.getElementById('firstname-input').value = profileData.firstName || '';
    document.getElementById('lastname-input').value = profileData.lastName || '';
    document.getElementById('email-input').value = profileData.email || '';
    document.getElementById('phone-input').value = profileData.phone || '';
    document.querySelector('input[placeholder="Enter your delivery address"]').value = profileData.deliveryAddress || '';
    document.getElementById('pincode-input').value = profileData.pinCode || '';
    document.getElementById('state-input').value = profileData.state || '';
    document.getElementById('district-input').value = profileData.district || '';
    document.getElementById('area-input').value = profileData.area || '';
    
    // Load saved payment methods
    if (profileData.paymentMethods) {
      savedPaymentMethods = profileData.paymentMethods;
      loadSavedPaymentMethods();
    }
  }
}

// Load profile data when page loads
window.addEventListener('DOMContentLoaded', function() {
  loadSavedPaymentMethods();
  loadProfileData();
  loadProfilePhoto();
});
</script>
  </body>
</html>
